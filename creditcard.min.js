var CreditCard={CARDS:{Visa:/^4[0-9]{12}(?:[0-9]{3})?$/,MasterCard:/^5[1-5][0-9]{14}$/,DinersClub:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,Amex:/^3[47][0-9]{13}$/,Discover:/^6(?:011|5[0-9]{2})[0-9]{12}$/},TEST_NUMBERS:"378282246310005 371449635398431 378734493671000 30569309025904 38520000023237 6011111111111117 6011000990139424 5555555555554444 5105105105105100 4111111111111111 4012888888881881 4222222222222".split(" "),validate:function(a){return CreditCard.verifyLuhn10(a)&&!!CreditCard.type(a)&&!CreditCard.isTestNumber(a)},
verifyLuhn10:function(a){a=CreditCard.strip(a);var b=0,e=a.length-1;for(i=e;i>-1;i--){var c=parseInt(a.charAt(i),10);if((e-i)%2!=0)c*=2;c=c.toString();for(var d=0;d<c.length;d++)b+=parseInt(c[d],10)}return b%10==0},isTestNumber:function(a){return CreditCard.TEST_NUMBERS.indexOf(CreditCard.strip(a))!=-1},strip:function(a){return a.replace(/\s+/g,"")},type:function(a){for(var b in CreditCard.CARDS)if(CreditCard["is"+b](a))return b},bindType:function(a){var b=CreditCard.checkType;return function(){return b.apply(a,
arguments)}},checkType:function(a){return CreditCard.CARDS[this].test(CreditCard.strip(a))}};(function(){for(var a in CreditCard.CARDS)CreditCard["is"+a]=CreditCard.bindType(a)})();
